---
- name: Remove pre-existing OSPF processes for network_cli
  when: ansible_connection == 'ansible.netcommon.network_cli'
  cisco.nxos.nxos_config:
    lines:
      - no router ospf 100
      - no router ospf 102
      - no router ospf 104
  ignore_errors: true

- name: Remove pre-existing OSPF processes for httpapi
  when: ansible_connection == 'ansible.netcommon.httpapi'
  cisco.nxos.nxos_config:
    lines:
      - "{{ item }}"
  loop:
    - no router ospf 100
    - no router ospf 102
    - no router ospf 104
  ignore_errors: true
