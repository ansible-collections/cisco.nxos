---
- ansible.builtin.debug:
    msg: Start nxos_l3_interfaces rendered integration tests ansible_connection={{ ansible_connection }}

- block:
    - name: Render the commands for provided  configuration
      become: true
      register: result
      cisco.nxos.nxos_l3_interfaces:
        config:
          - name: Ethernet1/1
            mac_address: 0011.2233.4455
            ipv4:
              verify:
                unicast:
                  source:
                    reachable_via:
                      mode: any
                      allow_default: true
              dhcp:
                relay:
                  address:
                    - relay_ip: 11.0.0.1
                      vrf_name: abc
          - name: Ethernet1/2
            ipv6:
              address:
                - ipv6_address: 2001:db8::1/32
                  route_preference: 70
                  tag: 97
              dhcp:
                relay:
                  address:
                    - relay_ip: 2001:db8::1:abcd
        state: rendered

    - ansible.builtin.assert:
        that:
          - result.changed == false
          - result.rendered|symmetric_difference(rendered.commands) == []
