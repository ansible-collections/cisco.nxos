---
merged:
  before:
    - name: Ethernet1/1
    - name: Ethernet1/2
  commands:
    - interface Ethernet1/1
    - mac-address 0011.2233.4455
    - ip verify unicast source reachable-via any allow-default
    - ip dhcp relay address 11.0.0.1 use-vrf abc
    - interface Ethernet1/2
    - ipv6 address 2001:db8::1/32 route-preference 70 tag 97
    - ipv6 dhcp relay address 2001:db8::1:abcd
  after:
    - name: Ethernet1/1
      mac_address: 0011.2233.4455
      ipv4:
        verify:
          unicast:
            source:
              reachable_via:
                mode: any
                allow_default: true
        dhcp:
          relay:
            address:
              - relay_ip: 11.0.0.1
                vrf_name: abc
    - name: Ethernet1/2
      ipv6:
        address:
          - ipv6_address: 2001:db8::1/32
            route_preference: 70
            tag: 97
        dhcp:
          relay:
            address:
              - relay_ip: 2001:db8::1:abcd

replaced:
  before:
    - name: Ethernet1/1
      mac_address: 0011.2233.4455
      ipv4:
        verify:
          unicast:
            source:
              reachable_via:
                mode: any
                allow_default: true
        dhcp:
          relay:
            address:
              - relay_ip: 11.0.0.1
                vrf_name: abc
    - name: Ethernet1/2
      ipv6:
        address:
          - ipv6_address: 2001:db8::1/32
            route_preference: 70
            tag: 97
        dhcp:
          relay:
            address:
              - relay_ip: 2001:db8::1:abcd
  commands:
    - interface Ethernet1/2
    - no ipv6 address 2001:db8::1/32 route-preference 70 tag 97
    - ipv6 address 2001:db8::1/32 route-preference 200 tag 22
    - mac-address 0011.2233.4456
  after:
    - name: Ethernet1/1
      mac_address: 0011.2233.4455
      ipv4:
        verify:
          unicast:
            source:
              reachable_via:
                mode: any
                allow_default: true
        dhcp:
          relay:
            address:
              - relay_ip: 11.0.0.1
                vrf_name: abc
    - name: Ethernet1/2
      mac_address: 0011.2233.4456
      ipv6:
        address:
          - ipv6_address: 2001:db8::1/32
            route_preference: 200
            tag: 22
        dhcp:
          relay:
            address:
              - relay_ip: 2001:db8::1:abcd

overridden:
  before:
    - name: Ethernet1/1
      mac_address: 0011.2233.4455
      ipv4:
        verify:
          unicast:
            source:
              reachable_via:
                mode: any
                allow_default: true
        dhcp:
          relay:
            address:
              - relay_ip: 11.0.0.1
                vrf_name: abc
    - name: Ethernet1/2
      ipv6:
        address:
          - ipv6_address: 2001:db8::1/32
            route_preference: 70
            tag: 97
        dhcp:
          relay:
            address:
              - relay_ip: 2001:db8::1:abcd
  commands:
    - interface Ethernet1/1
    - no ip dhcp relay address 11.0.0.1 use-vrf abc
    - interface Ethernet1/2
    - no ipv6 address 2001:db8::1/32 route-preference 70 tag 97
    - no ipv6 dhcp relay address 2001:db8::1:abcd
  after:
    - name: Ethernet1/1
      mac_address: 0011.2233.4455
      ipv4:
        verify:
          unicast:
            source:
              reachable_via:
                mode: any
                allow_default: true
    - name: Ethernet1/2

deleted:
  before:
    - name: Ethernet1/1
      mac_address: 0011.2233.4455
      ipv4:
        verify:
          unicast:
            source:
              reachable_via:
                mode: any
                allow_default: true
        dhcp:
          relay:
            address:
              - relay_ip: 11.0.0.1
                vrf_name: abc
    - name: Ethernet1/2
      ipv6:
        address:
          - ipv6_address: 2001:db8::1/32
            route_preference: 70
            tag: 97
        dhcp:
          relay:
            address:
              - relay_ip: 2001:db8::1:abcd
  commands:
    - interface Ethernet1/1
    - no mac-address 0011.2233.4455
    - no ip verify unicast source reachable-via any allow-default
    - no ip dhcp relay address 11.0.0.1 use-vrf abc
    - interface Ethernet1/2
    - no ipv6 address 2001:db8::1/32 route-preference 70 tag 97
    - no ipv6 dhcp relay address 2001:db8::1:abcd
  after:
    - name: Ethernet1/1
    - name: Ethernet1/2

gathered:
  config:
    - name: Ethernet1/1
      mac_address: 0011.2233.4455
      ipv4:
        verify:
          unicast:
            source:
              reachable_via:
                mode: any
                allow_default: true
        dhcp:
          relay:
            address:
              - relay_ip: 11.0.0.1
                vrf_name: abc
    - name: Ethernet1/2
      ipv6:
        address:
          - ipv6_address: 2001:db8::1/32
            route_preference: 70
            tag: 97
        dhcp:
          relay:
            address:
              - relay_ip: 2001:db8::1:abcd

parsed:
  config:
    - name: Ethernet1/1
      mac_address: 0011.2233.4455
      ipv4:
        verify:
          unicast:
            source:
              reachable_via:
                mode: any
                allow_default: true
        dhcp:
          relay:
            address:
              - relay_ip: 11.0.0.1
                vrf_name: abc
    - name: Ethernet1/2
      ipv6:
        address:
          - ipv6_address: 2001:db8::1/32
            route_preference: 70
            tag: 97
        dhcp:
          relay:
            address:
              - relay_ip: 2001:db8::1:abcd

rtt:
  commands:
    - interface Ethernet1/2
    - mac-address 0011.2233.4455

rendered:
  commands:
    - interface Ethernet1/1
    - mac-address 0011.2233.4455
    - ip verify unicast source reachable-via any allow-default
    - ip dhcp relay address 11.0.0.1 use-vrf abc
    - interface Ethernet1/2
    - ipv6 address 2001:db8::1/32 route-preference 70 tag 97
    - ipv6 dhcp relay address 2001:db8::1:abcd
