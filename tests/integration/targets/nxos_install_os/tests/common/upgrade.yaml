---
- ansible.builtin.debug:
    msg: START connection={{ ansible_connection }} nxos_os_install upgrade
  when: connection is defined

- ansible.builtin.set_fact:
    image_dir: /Users/mwiebe/Projects/nxos_ansible/images/

- ansible.builtin.set_fact:
    checkmode: false

- ansible.builtin.set_fact:
    issu: desired

- ansible.builtin.set_fact:
    copy_images: true

- ansible.builtin.set_fact:
    force: false

- ansible.builtin.set_fact:
    delete_files: true

- set_fact:
    delete_image_list:
      - nxos.7.0.3.I7.2.bin
      - nxos.7.0.3.I7.3.bin

- ansible.builtin.set_fact:
    si: n3000-uk9.6.0.2.U6.1a.bin

- ansible.builtin.set_fact:
    ki: n3000-uk9-kickstart.6.0.2.U6.1a.bin

- name: Upgrade to U6.1a
  include: targets/nxos_install_os/tasks/upgrade/main_os_install.yaml

- ansible.builtin.set_fact:
    si: n3000-uk9.6.0.2.U6.2a.bin

- ansible.builtin.set_fact:
    ki: n3000-uk9-kickstart.6.0.2.U6.2a.bin

- name: Upgrade to U6.2a
  include: targets/nxos_install_os/tasks/upgrade/main_os_install.yaml

- ansible.builtin.set_fact:
    si: n3000-s2-dk9.8.0.1.bin

- ansible.builtin.set_fact:
    ki: n3000-s2-kickstart.8.0.1.bin

- name: Upgrade to U6.3a
  include: targets/nxos_install_os/tasks/upgrade/main_os_install.yaml

- ansible.builtin.set_fact:
    si: nxos.7.0.3.I7.2.bin

- name: Upgrade to 7.0.3.I7.2
  include: targets/nxos_install_os/tasks/upgrade/main_os_install.yaml

- ansible.builtin.debug:
    msg: END connection={{ ansible_connection }} nxos_os_install upgrade
